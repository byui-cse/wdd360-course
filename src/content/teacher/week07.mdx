---
title: Week 07 Teacher notes

---

The course shifts gears this week as we apply more focus to finishing the Sleepoutside project. The students should complete at least 12 points in Trello cards over the next three weeks.

For the lab I would finish the Svelte introduction that we started in week 5. 

Here is a link to the [Finished Demo](https://svelte.dev/repl/29fee1e15b304aeaa04da08d944caab5?version=3.59.1) from last week in case any of the students need it.

1. First let's get a real project that can use Svelte setup.

   ```bash
   pnpm init vite
   ```

   , provide the folder name you want. Then pick Svelte and Javascript as the options. Finish with `npm install` and `npm run dev`

2. Move the code from `App.svelte`, `Post.svelte`, and `TagList.svelte` into the new project. 

3. Add an input and a button to use to search our posts. Show how we can bind a state variable to the input (`bind:value={q}`). Then show how to attach an event to the button (`on:click={handleSearch}`)

4. Finally we need to create a function to filter the posts based on the text entered in the input. We should filter on body, title, and tags.

5. If you have more time you could add a list of unique tags...gives you an opportunity to show how to get a unique list of things. When you click a tag it will call our filter function. You could even model adding an `active` class to highlight which tag is currently filtering.

See below for the finished code:

```svelte
<script>
// App.svelte
import Post from './Post.svelte';
import {onMount} from 'svelte'
  
let posts = [];
let filteredPosts = [];
let uniqueTags = [];
let q = "";

async function getPosts(q="") {
  const res = await fetch('https://dummyjson.com/posts/')
    return res.json()
}
async function init() {
  posts = await getPosts();
  console.log(posts)
  filteredPosts = posts.posts;
  createTagList();
}
function createTagList() {
  const tags = posts.posts.map(post => post.tags).flat();
  const tagSet = new Set(tags)
  uniqueTags = [...tagSet]
}
function filterPosts(q) {
  if(q) {
    return posts.posts.filter(post => (post.tags.indexOf(q) != -1 || post.body.includes(q) || post.title.includes(q)))
  }
  else return posts.posts;
}

async function handleSearch(e) {
  if(e.target.dataset.tag) {
    filteredPosts = filterPosts(e.target.dataset.tag);
    clearTagActive();
    e.target.classList.add('active');
  } else {
    filteredPosts = filterPosts(q);
  }
  console.log(filteredPosts)
}
function clearTagActive() {
  const tags = document.querySelectorAll('[data-tag]');
  tags.forEach(tag => tag.classList.remove('active'));
}
init()
// 	onMount(init)
</script>

<main>
<h1>My Blog</h1>
<input bind:value={q}  placeholder="Search"><button on:click={handleSearch}>Search</button>

<ul class="tags" on:click={handleSearch}>
  {#each uniqueTags as tag}
    <li data-tag={tag}>{tag}</li>
  {/each}
</ul>
<section>
  <h2>Posts</h2>
{#each filteredPosts as post}
    <Post {post} layoutClass="post" />
{/each}
</section>
</main>

<style>
main {
  font-family: courier;
}
.tags {
  list-style-type: none;
  padding-left: 0;
  display: flex;
  flex-wrap: wrap
}
.tags > li {
  padding: .2em .5em;
  border: 1px solid;
}
:global(.active) {
  background-color: antiquewhite;
}
section {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1em;
}
h2 {
  grid-column: 1/3;
  justify-self: center
}
/* 	We want the parent to have layout control over the child. We can do this by passing a class (post) in as a prop, then add the :global flag to make this class able to apply */
:global(.post) {
  max-width: 66ch;
  border: 1px solid
  
}
</style>
```

```svelte
<script>
// Post.svelte
export let post={}
export let layoutClass= ""
</script>

<div class={layoutClass}>
  <h2>{post.title}</h2>
  <ul>
  {#each post.tags as tag}
    <li>{tag}</li>
  {/each}
  </ul>
<!-- 	<h3>{JSON.stringify(post)}</h3> -->
  <p>{post.body}</p>
</div>

<style>
  div {
    padding: 1em;
  }
  ul {
    display: flex;
    list-style-type: none;
    font-size: .8em
  }
  li {
    padding: .2em 1em;
    border: 1px solid;
  }
</style>
```


