---
import type { HTMLAttributes } from "astro/types";

type Props = HTMLAttributes<"iframe">;

const { src, title, class: className, ...props } = Astro.props;
---

<figure class:list={[className]} {...props}>
  <div>
    <iframe
      width="560"
      height="315"
      src={"https://www.youtube.com/embed/" + src}
      title={title}
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen></iframe>
  </div>
  <figcaption><slot /></figcaption>
</figure>

<style>
  figure > div {
    position: relative;
    overflow: hidden;
    height: 0;
    padding-bottom: calc(var(--aspect-ratio, 0.5625) * 100%);
    margin: 0.5em 0;
  }
  figure iframe {
    position: absolute;

    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  figcaption {
    font-size: 0.8em;
    text-align: center;
  }
</style>
